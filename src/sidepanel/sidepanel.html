<!doctype html>
<html lang="zh-CN" data-theme="dark">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AI Multiverse</title>
        <link rel="stylesheet" href="sidepanel.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../lib/github.min.css" />
    </head>

    <body>
        <div class="sidebar-container">
            <!-- Header -->
            <header class="sidebar-header">
                <div class="logo-area">
                    <img
                        src="../../icons/icon.svg"
                        class="main-logo-img"
                        alt="Logo"
                    />
                    <h2 data-i18n="logo">AI Â§öÈáçÂÆáÂÆô</h2>
                </div>
                <div class="header-actions">
                    <button
                        class="icon-btn"
                        id="langToggleBtn"
                        data-i18n-title="switch_language"
                        title="ÂàáÊç¢ËØ≠Ë®Ä"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                            <path
                                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
                            ></path>
                        </svg>
                        <span class="lang-badge">‰∏≠Êñá</span>
                    </button>
                    <button
                        class="icon-btn"
                        id="openModelsBtn"
                        data-i18n-title="choose_models"
                        title="ÈÄâÊã©AIÊ®°Âûã"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                            ></path>
                        </svg>
                        <span class="btn-badge" id="selectionBadge">0</span>
                    </button>
                    <div class="header-divider"></div>
                    <button
                        class="icon-btn highlight-btn"
                        id="launchOnlyBtn"
                        data-i18n-title="open_selected"
                        title="‰ªÖÊâìÂºÄÁΩëÈ°µ"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path
                                d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                            ></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                    </button>
                    <button
                        class="icon-btn"
                        id="tileBtn"
                        data-i18n-title="arrange_selected"
                        title="Âπ≥Èì∫Á™óÂè£"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                    </button>
                    <button
                        class="icon-btn danger-btn"
                        id="closeBtn"
                        data-i18n-title="close_all"
                        title="ÂÖ≥Èó≠ÂÖ®ÈÉ®"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <rect
                                x="3"
                                y="3"
                                width="18"
                                height="18"
                                rx="2"
                                ry="2"
                            ></rect>
                            <line x1="9" y1="9" x2="15" y2="15"></line>
                            <line x1="15" y1="9" x2="9" y2="15"></line>
                        </svg>
                    </button>
                    <div class="header-divider"></div>
                    <button
                        class="icon-btn"
                        id="clearHistoryBtn"
                        data-i18n-title="clear_history"
                        title="Ê∏ÖÁ©∫ÂéÜÂè≤"
                    >
                        <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path
                                d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                            ></path>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Main Chat Interface -->
            <div class="chat-interface">
                <div class="conversation-stream" id="conversationStream">
                    <div class="empty-state" id="emptyState">
                        <div class="empty-icon">üí¨</div>
                        <p data-i18n="no_conversations">ÂºÄÂßã‰Ω†ÁöÑÁ¨¨‰∏ÄÊ¨°ÂØπËØù</p>
                    </div>
                </div>
                <!-- ÊÇ¨ÊµÆÁõ¥ËææÊÄªÁªìÊåâÈíÆ -->
                <button
                    id="floatJumpSummary"
                    class="float-jump-btn"
                    title="Áõ¥ËææÊô∫ËÉΩÊÄªÁªì"
                >
                    ‚ú®
                </button>
            </div>

            <!-- Input Section (Fixed at bottom) -->
            <div class="input-section" id="inputSection">
                <!-- File Preview -->
                <div
                    class="file-preview-container"
                    id="filePreview"
                    style="display: none"
                >
                    <div class="file-preview-header">
                        <span data-i18n="file_preview">Â∑≤ÈôÑÂä†Êñá‰ª∂</span>
                        <button
                            class="clear-files-btn"
                            id="clearFilesBtn"
                            data-i18n="file_clear_all"
                        >
                            Ê∏ÖÁ©∫
                        </button>
                    </div>
                    <div class="file-preview-list" id="filePreviewList"></div>
                </div>

                <!-- Drag Overlay -->
                <div class="drag-overlay" id="dragOverlay">
                    <div class="drag-overlay-content">
                        <svg
                            width="48"
                            height="48"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                        >
                            <path
                                d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
                            ></path>
                        </svg>
                        <p data-i18n="drag_files_here">ÊãñÊîæÊñá‰ª∂Âà∞Ê≠§Â§Ñ‰∏ä‰º†</p>
                    </div>
                </div>

                <!-- Input Box -->
                <div class="input-box">
                    <input
                        type="file"
                        id="fileInput"
                        multiple
                        accept="image/*,.pdf,.txt,.doc,.docx,.md,.json,.csv"
                        style="display: none"
                    />

                    <div class="input-wrapper">
                        <textarea
                            id="prompt"
                            data-i18n-placeholder="ask_anything"
                            placeholder="ËæìÂÖ•‰ªª‰ΩïÈóÆÈ¢ò... (Enter ÂèëÈÄÅ)"
                            rows="1"
                        ></textarea>

                        <div class="input-actions">
                            <button
                                class="action-btn"
                                id="attachFileBtn"
                                data-i18n-title="attach_files"
                                title="ÈôÑÂä†Êñá‰ª∂"
                            >
                                <svg
                                    width="18"
                                    height="18"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path
                                        d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"
                                    ></path>
                                </svg>
                            </button>
                            <button class="action-btn primary" id="sendBtn">
                                <svg
                                    width="18"
                                    height="18"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon
                                        points="22 2 15 22 11 13 2 9 22 2"
                                    ></polygon>
                                </svg>
                            </button>
                            <button
                                class="action-btn"
                                id="summarizeBtn"
                                data-i18n-title="smart_summarize"
                                title="Êô∫ËÉΩÊÄªÁªì"
                                style="font-size: 16px; line-height: 1"
                            >
                                ‚ú®
                            </button>
                            <button
                                class="action-btn"
                                id="toggleAllBtn"
                                data-i18n-title="toggle_all"
                                title="ÂÖ®ÈÉ®Â±ïÂºÄ/ÊäòÂè†"
                            >
                                <svg
                                    width="18"
                                    height="18"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path d="M4 14h6v6"></path>
                                    <path d="M20 10h-6V4"></path>
                                    <path d="M14 10l7-7"></path>
                                    <path d="M3 21l7-7"></path>
                                </svg>
                            </button>
                            <button
                                class="action-btn"
                                id="copyAllBtn"
                                data-i18n-title="copy_all"
                                title="Â§çÂà∂ÂÖ®ÈÉ®"
                            >
                                <svg
                                    width="18"
                                    height="18"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <rect
                                        x="9"
                                        y="9"
                                        width="13"
                                        height="13"
                                        rx="2"
                                        ry="2"
                                    ></rect>
                                    <path
                                        d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"
                                    ></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Status Panel (hidden by default) -->
            <div class="status-panel" id="status"></div>

            <!-- Modals (keep all existing modals) -->
            <!-- Detail Modal -->
            <div class="modal-overlay" id="detailModal">
                <div class="modal-content detail-content">
                    <div
                        class="modal-resize-handle modal-resize-handle-left"
                    ></div>
                    <div
                        class="modal-resize-handle modal-resize-handle-right"
                    ></div>
                    <button
                        class="modal-nav-arrow modal-nav-left"
                        id="modalNavLeft"
                    >
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2.5"
                        >
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <button
                        class="modal-nav-arrow modal-nav-right"
                        id="modalNavRight"
                    >
                        <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2.5"
                        >
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                    <div class="modal-header">
                        <div class="modal-title detail-header-info">
                            <img
                                src=""
                                id="detailIcon"
                                class="provider-icon-img"
                                alt=""
                            />
                            <h3 id="detailName">AI Provider</h3>
                        </div>
                        <button class="close-modal-btn" id="closeDetailBtn">
                            &times;
                        </button>
                    </div>
                    <div class="detail-body" id="detailText"></div>
                    <div class="modal-footer detail-modal-footer">
                        <button class="primary-btn-send" id="copyDetailBtn">
                            Â§çÂà∂Ê≠§ÂìçÂ∫î
                        </button>
                        <div
                            class="modal-position-indicator"
                            id="modalPositionIndicator"
                        >
                            <span class="position-text" id="positionText"
                                >1 of 1</span
                            >
                            <div class="position-dots" id="positionDots"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Models Modal -->
            <div class="modal-overlay" id="modelsModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="modal-title">
                            <h3 data-i18n="models_title">AI Ê®°Âûã</h3>
                            <p data-i18n="select_recipients">ÈÄâÊã©Êé•Êî∂Êñπ</p>
                        </div>
                        <button class="close-modal-btn" id="closeModelsBtn">
                            &times;
                        </button>
                    </div>
                    <div class="provider-grid">
                        <label class="provider-card" for="gemini">
                            <input
                                type="checkbox"
                                id="gemini"
                                value="gemini"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/gemini.svg"
                                    class="provider-icon-img"
                                    alt="Gemini"
                                />
                                <span class="provider-name">Gemini</span>
                            </div>
                        </label>
                        <label class="provider-card" for="grok">
                            <input
                                type="checkbox"
                                id="grok"
                                value="grok"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/grok.svg"
                                    class="provider-icon-img"
                                    alt="Grok"
                                />
                                <span class="provider-name">Grok</span>
                            </div>
                        </label>
                        <label class="provider-card" for="kimi">
                            <input
                                type="checkbox"
                                id="kimi"
                                value="kimi"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/kimi.png"
                                    class="provider-icon-img"
                                    alt="Kimi"
                                />
                                <span class="provider-name">Kimi</span>
                            </div>
                        </label>
                        <label class="provider-card" for="deepseek">
                            <input
                                type="checkbox"
                                id="deepseek"
                                value="deepseek"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/deepseek.svg"
                                    class="provider-icon-img"
                                    alt="DeepSeek"
                                />
                                <span class="provider-name">DeepSeek</span>
                            </div>
                        </label>
                        <label class="provider-card" for="chatgpt">
                            <input
                                type="checkbox"
                                id="chatgpt"
                                value="chatgpt"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/chatgpt.svg"
                                    class="provider-icon-img"
                                    alt="ChatGPT"
                                />
                                <span class="provider-name">ChatGPT</span>
                            </div>
                        </label>
                        <label class="provider-card" for="qwen">
                            <input
                                type="checkbox"
                                id="qwen"
                                value="qwen"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/qwen.png"
                                    class="provider-icon-img"
                                    alt="Qwen"
                                />
                                <span class="provider-name">ÈÄö‰πâÂçÉÈóÆ</span>
                            </div>
                        </label>
                        <label class="provider-card" for="yuanbao">
                            <input
                                type="checkbox"
                                id="yuanbao"
                                value="yuanbao"
                                checked
                            />
                            <div class="card-content">
                                <img
                                    src="icons/yuanbao.ico"
                                    class="provider-icon-img"
                                    alt="Yuanbao"
                                />
                                <span class="provider-name">ËÖæËÆØÂÖÉÂÆù</span>
                            </div>
                        </label>
                    </div>
                    <div class="modal-footer">
                        <button
                            class="secondary-btn"
                            id="summarizeSettingsInModelsBtn"
                            data-i18n="summarize_settings"
                        >
                            Êô∫ËÉΩÊÄªÁªìËÆæÁΩÆ
                        </button>
                        <button
                            class="primary-btn-blue"
                            id="confirmModelsBtn"
                            data-i18n="confirm"
                        >
                            Á°ÆËÆ§
                        </button>
                    </div>
                </div>
            </div>

            <!-- Summarize Settings Modal -->
            <div class="modal-overlay" id="summarizeSettingsModal">
                <div class="modal-content summarize-modal">
                    <div class="modal-header">
                        <div class="modal-title">
                            <h3 data-i18n="summarize_settings_title">
                                ÊÄªÁªìËÆæÁΩÆ
                            </h3>
                            <p data-i18n="summarize_settings_subtitle">
                                ÈÄâÊã©Ê®°ÂûãÂíåÊèêÁ§∫ËØçËøõË°åÊÄªÁªì
                            </p>
                        </div>
                        <button
                            class="close-modal-btn"
                            id="closeSummarizeSettingsBtn"
                        >
                            &times;
                        </button>
                    </div>
                    <div class="summarize-body">
                        <div class="summarize-setting-group">
                            <label data-i18n="summarize_model_label"
                                >ÊÄªÁªìÊ®°Âûã</label
                            >
                            <select
                                id="summarizeModelSelect"
                                class="summarize-select"
                                title="ÈÄâÊã©ÊÄªÁªìÁî® AI Ê®°Âûã"
                            >
                                <option value="gemini">Gemini</option>
                                <option value="grok">Grok</option>
                                <option value="kimi">Kimi</option>
                                <option value="deepseek">DeepSeek</option>
                                <option value="chatgpt">ChatGPT</option>
                                <option value="qwen">Qwen</option>
                                <option value="yuanbao">Yuanbao</option>
                            </select>
                        </div>
                        <div class="summarize-setting-group">
                            <label data-i18n="summarize_prompt_label"
                                >ÊÄªÁªìÊèêÁ§∫ËØç</label
                            >
                            <div class="prompt-actions">
                                <button
                                    class="secondary-btn-small"
                                    id="useDefaultPromptBtn"
                                    data-i18n="use_defaultPrompt"
                                >
                                    ‰ΩøÁî®ÈªòËÆ§
                                </button>
                                <button
                                    class="secondary-btn-small"
                                    id="resetPromptBtn"
                                    data-i18n="reset_prompt"
                                >
                                    ÈáçÁΩÆ
                                </button>
                            </div>
                            <textarea
                                id="summarizePromptInput"
                                class="summarize-textarea"
                                rows="8"
                                placeholder="ËæìÂÖ•Ëá™ÂÆö‰πâÁöÑÊÄªÁªìÊèêÁ§∫ËØç..."
                            ></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button
                            class="confirm-btn-secondary"
                            id="summarizeSettingsCancelBtn"
                            data-i18n="cancel"
                        >
                            ÂèñÊ∂à
                        </button>
                        <button
                            class="confirm-btn-primary"
                            id="summarizeSettingsConfirmBtn"
                            data-i18n="confirm"
                        >
                            Á°ÆËÆ§
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Custom Confirm Modal -->
        <div class="modal-overlay" id="confirmModal">
            <div class="modal-content confirm-modal-content">
                <div class="confirm-modal-icon" id="confirmModalIcon">
                    <svg
                        width="28"
                        height="28"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path
                            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"
                        ></path>
                        <line x1="12" y1="9" x2="12" y2="13"></line>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                </div>
                <h3 class="confirm-modal-title" id="confirmModalTitle">
                    Á°ÆËÆ§Êìç‰Ωú
                </h3>
                <p class="confirm-modal-desc" id="confirmModalDesc">
                    Ê≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºåÊòØÂê¶ÁªßÁª≠Ôºü
                </p>
                <div class="confirm-modal-actions">
                    <button
                        class="confirm-modal-cancel"
                        id="confirmModalCancel"
                    >
                        ÂèñÊ∂à
                    </button>
                    <button class="confirm-modal-ok danger" id="confirmModalOk">
                        Á°ÆËÆ§Âà†Èô§
                    </button>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="../lib/marked.min.js"></script>
        <script src="../lib/highlight.min.js"></script>
        <script src="../lib/purify.min.js"></script>
        <script src="../config.js"></script>
        <script src="../i18n.js"></script>
        <script src="sidepanel.js"></script>
    </body>
</html>
