# AI Multiverse Chat v1.6 - 用户验收测试说明书

## 准备工作
1. 确保 Chrome 浏览器已打开
2. 确保至少有一个 AI 平台页面已打开并登录
3. 按 `Alt+Shift+S` 打开 AI Multiverse Chat 侧边栏

---

## 测试1：基础功能测试

### 1.1 附件按钮显示
**预期结果**：
- 输入工具栏中显示回形针图标
- 按钮提示显示"Attach"（英文）或"附件"（中文）

### 1.2 文件选择
**操作步骤**：
1. 点击附件按钮
2. 选择一个图片文件

**预期结果**：
- 系统文件选择对话框打开
- 选择文件后输入框下方显示文件预览区

### 1.3 文件预览
**预期结果**：
- 预览区显示文件名
- 显示文件类型图标（图片文件显示图片图标）
- 显示文件大小（自动格式化，如"1.5 MB"）
- 文件右侧有"×"按钮可以移除

### 1.4 清空所有文件
**操作步骤**：
1. 选择2-3个文件
2. 点击"Clear all files"按钮

**预期结果**：
- 所有文件预览项消失
- 预览区域隐藏

---

## 测试2：多文件操作

### 2.1 多文件选择
**操作步骤**：
1. 点击附件按钮
2. 按住 Ctrl/Cmd 多选3个文件

**预期结果**：
- 3个文件全部显示在预览区
- 文件列表垂直排列

### 2.2 单个文件移除
**操作步骤**：
1. 选择3个文件
2. 点击第二个文件的"×"按钮

**预期结果**：
- 只有第二个文件被移除
- 其他两个文件仍显示

### 2.3 快速连续操作
**操作步骤**：
1. 选择文件A
2. 立即移除文件A
3. 选择文件B
4. 立即移除文件B

**预期结果**：
- 所有操作立即响应
- 无UI卡顿

---

## 测试3：文件限制验证

### 3.1 单文件大小限制
**操作步骤**：
1. 选择一个大文件（>10MB）

**预期结果**：
- 显示错误提示："File too large: 10MB max"（英文）/ "文件过大：最大 10MB"（中文）
- 文件未添加到预览区

### 3.2 总大小限制
**操作步骤**：
1. 已选择40MB的文件
2. 再选择一个11MB的文件

**预期结果**：
- 显示错误提示："Total size too large: 50MB max"（英文）/ "总大小过大：最大 50MB"（中文）
- 第二个文件未添加

### 3.3 边界值测试
**操作步骤**：
1. 选择一个刚好10MB的文件

**预期结果**：
- 文件可以正常添加

---

## 测试4：发送功能

### 4.1 仅文件（无文本）
**操作步骤**：
1. 仅选择一个图片文件
2. 不输入任何文本
3. 点击"Send"按钮

**预期结果**：
- 消息成功发送
- 文件附加到消息

### 4.2 文件+文本
**操作步骤**：
1. 输入文本："分析这张图片"
2. 附加一个图片文件
3. 点击"Send"按钮

**预期结果**：
- 文本和文件一起发送
- AI平台正确处理

### 4.3 多平台发送
**操作步骤**：
1. 勾选至少2个平台
2. 附加一个文件
3. 发送消息

**预期结果**：
- 文件发送到所有勾选的平台
- 各平台都显示文件

---

## 测试5：平台特定测试

### 5.1 Gemini
**操作步骤**：
1. 发送一个图片到Gemini
2. 发送一个PDF到Gemini

**预期结果**：
- 两种文件都能成功上传
- Gemini界面显示文件预览

### 5.2 ChatGPT
**操作步骤**：
1. 发送一个代码文件（.py或.js）
2. 发送一个PDF文件

**预期结果**：
- 两种文件都能成功上传
- ChatGPT显示文件预览

### 5.3 Kimi
**操作步骤**：
1. 发送一个Word文档
2. 发送一个Markdown文件

**预期结果**：
- 两种文件都能成功上传
- Kimi显示文件内容

---

## 测试6：错误处理

### 6.1 文件类型过滤
**操作步骤**：
1. 选择一个不支持的文件（如.exe文件）
2. 尝试发送到DeepSeek

**预期结果**：
- 文件被过滤掉（不显示不支持类型的警告）
- 消息发送但不包含该文件

### 6.2 上传失败模拟
**操作步骤**：
1. 断开网络
2. 选择一个文件
3. 尝试发送

**预期结果**：
- 30秒后显示超时错误
- 自动重试（最多2次）
- 显示最终错误消息

---

## 测试7：国际化

### 7.1 英文界面
**操作步骤**：
1. 切换到英语（点击"EN"按钮）
2. 检查所有文件相关UI

**预期结果**：
- 按钮显示"Attach"
- 预览标题显示"Attached files"
- 清空按钮显示"Clear all files"
- 错误消息为英文

### 7.2 中文界面
**操作步骤**：
1. 切换到中文（点击"中文"按钮）
2. 检查所有文件相关UI

**预期结果**：
- 按钮显示"附件"
- 预览标题显示"已附加文件"
- 清空按钮显示"清空所有文件"
- 错误消息为中文

---

## 测试8：历史记录

### 8.1 文件元数据保存
**操作步骤**：
1. 发送一个带文件的消息
2. 查看历史记录

**预期结果**：
- 历史记录显示文件名
- 显示文件类型
- 显示文件大小
- 不显示实际文件内容（节省空间）

---

## 测试9：UI交互

### 9.1 鼠标悬停效果
**操作步骤**：
1. 鼠标悬停在文件项上
2. 鼠标悬停在移除按钮上

**预期结果**：
- 文件项有轻微的背景色变化
- 移除按钮变红色

### 9.2 焦点状态
**操作步骤**：
1. 将焦点附加到附件按钮
2. 按Enter键

**预期结果**：
- 触发文件选择对话框

---

## 测试10：性能测试

### 10.1 大文件处理
**操作步骤**：
1. 选择一个7MB的图片文件
2. 记录到文件显示在预览区的时间

**预期结果**：
- 文件预览在3秒内显示

### 10.2 内存使用
**操作步骤**：
1. 打开Chrome任务管理器
2. 执行10次文件操作
3. 观察内存变化

**预期结果**：
- 内存占用没有明显增长（无内存泄漏）

---

## 验收标准

必须通过所有测试才能验收：

- ✅ 基础功能：附件、选择、预览、清空
- ✅ 多文件操作：选择、移除、清空
- ✅ 文件限制：单文件10MB，总大小50MB
- ✅ 发送功能：仅文件、文件+文本、多平台
- ✅ 平台特定：至少测试3个平台
- ✅ 错误处理：超时、重试、错误提示
- ✅ 国际化：英文、中文UI正确
- ✅ 历史记录：文件元数据正确保存
- ✅ UI交互：悬停、焦点效果
- ✅ 性能：响应快速、无内存泄漏

---

## 已知问题记录

（如有问题，在此记录）

---

## 测试签名

测试人员：__________________
测试日期：__________________
结果：通过 / 需要修复
